# 변수 저장 공간

#### 선언과 정의
* 선언: 해당 심볼이 존재함을 컴파일러에게 알려준다.
* 정의: 실제로 메모리에 반영하고 컴파일러에게 알려준다.

#### C언어에서의 변수 기억 공간
위치    |  저장 변수
--------|-------------
data | 초기화된 정적 변수 저장 
bss  | 초기화 되지 않은 정적 변수 저장
stack | 지역변수
heap | 동적 메모리 할당에 의한 변수 저장

#### 변수의 수명
어느 공간에 저장되느냐에 따라 유효한 수명이 다르다. 

1. 정적변수(data, bss) : 프로그램 시작에 초기화되어 프로그램 종료때까지 유효하다.
 -> 전역변수, 내부 정적변수
 
* data와 bss를 나누어 저장하는 이유 : 초기화된 정적변수는 프로그램 내부에 저장해야하는데 이는 실행 파일의 용량증가로 이어진다.

```c
#include <stdio.h>

int n = 100; // data에 저장 => 실행 파일의 용량에 포함된다.
int g;       // bss 에 저장 => 실행 파일의 용량에 포함되지 않는다.

// 전역변수, 전역함수에 붙는 static -> 연결 범위 지정자 
static int j;
static void foo(){}

int main ()
{
	static int a; // 내부정적변수 =>  bss에 저장
}
```
2. 지역변수(stack) : 함수의 시작에 초기화 되어 함수 종료까지만 유효하다.
3. 힙변수(heap) : 사용자가 원하는 시점에 생성하고, 원하는 시점에 파괴 할 수 있다. (malloc, free)

#### 내부 정적 변수
* 함수가 처음 시작될 때 초기화되고, 프로그램이 종료될 때까지 유효하다.
* 선언된 함수내에서만 접근가능하다. 이때의 static은 __기억부류지정자__이다.
* static 지역변수는 stack이 아니고-> data, bss 에 저장! 
* 블럭 안에서만 유효한 값을 가지지만 auto변수와 달리 없어지지 않고 블럭으로 돌아오면 같은 값을 가진다. 

#### static keyword
원래는 다른 파일에서 전역 변수나 전역 함수를 접근하는 것이 가능하다. -> 외부 연결을 갖는다.  (external linkage)

-> 이를 내부 연결로 변경하고 싶다면 static (연결범위 지정자)를 쓰면 된다. 즉 다른 파일에서 변수나 함수를 접근하거나 호출 할 수 없다. 

