# OSI 7 Layers
개방형 시스템 상호연결(Open System Interconnection: OSI) 모델로서, 한글 그대로 시스템 상호 연결에 있어 개방(열려있다, 표준)모델을 뜻한다.
상호 이질적인 네트워크간의 연결에 어려움이 많은데 이러한 호환성의 결여를 막기위해 ISO(국제 표준화 기구)에서는 OSI 참조모델을 제시했다.
실제 인터넷에서 사용되는 TCP/IP는 OSI참조모델을 기반으로 상업적이고 실무적으로 이용될 수 있도록 단순화된 것으로 현실화의 과정에서 채택된 모형이다.

## OSI 7 계층의 탄생배경
여러 정보통신업체 장비들은 자신의 업체 장비 간만 연결이 되는 등 호환성이 없었다. 따라서 ISO단체에서 1984년에 OSI 참조모델을 발표하게 된다. 모든 시스템들의 상호 연결에 있어서 문제가 되지 않도록 표준을 만든 것이며, 7개의 계층으로 구분된다.

## OSI 7 계층의 목적
OSI7 계층의 가장 중요한 목적은 2가지 이다. 그것은 바로 __표준__ 과 __학습 도구__ 이다. 비용절감은 표준화를 통해 장비 별로 이질적인 포트의 문제나 프로토콜 등으로 인한 문제를 해결하기 위함이다. 
비용절감의 예로서 3계층 장비인 라우터를 제작하였는데, 그에 따른 1,2,4,5,6,7 모두 제작해야 하는 것이 아니라 프로토콜에 맞춰서 사용하게 되면 일일히 다 제작하지 않아도 되기 때문에 비용절감이된다. 그리고 이것이 표준화 목적 중 하나다.
네트워크 엔지니어의 경우는 주로 2,3,4 계층에 대해 업무를 수행한다. 그러나 당연히 1,5,6,7 계층도 알아야 전반적인 설계와 문제해결이 가능하다. 추후에 OSI 7계층은 계층별의 기능과 통신의 과정을 잘 정립하여 교육하기 위한 목적으로 자리매김하였다.

## 각 계층의 캡슐화와 디캡슐화
먼저 OSI 7계층은 응용, 표현, 세션, 전송, 네트워크, 데이터링크, 물리계층의 7계층으로 나뉘어진다. 데이터를 전송할 때, 각각의 층마다 인식할 수 있는 헤더를 붙이게 되는데 이러한 과정을 캡슐화라고 한다. 데이터를 전송하고 전송매체를 통해 다시 전송된 뒤 다시 1계층부터 7계층으로 올라가게 되면서 헤더가 벗겨지는데 이러한 과정을 디캡슐레이션이라고 한다. 
각각의 층마다 이렇게 요청과 응답을 하면서 상호작용을 하기 때문에 서버와 클라이언트 관계라고 할 수 있다.

출발지에서 데이터가 전송될때, 헤더가 씌어지며 캡슐화가되고, 2계층에서는 특히 오류제어를 위한 테일(꼬리)부분이 씌어지는것에 유의한다.
물리계층에서 1과 0의 신호가되어 전송매체(꼬임 쌍선, 동축 케이블, 광섬유 케이블 등)을 통해 전송된다.
다시 도착지로 갈때 헤더가 벗겨지는 디캡슐레이션 과정이 이루어지고 사용자에게 데이터가 전송되는 것이다.

## OSI 7 계층의 계층별 프로토콜과 기능
OSI 7 계층에서 PDU개념을 중용시 하는데, Process Data Unit이란 각 계층에서의 전송되는 단위이다.
1계층에서 PDU가 비트라고 생각하기 쉽지만, PDU라고 하지않고 단지 신호의 흐름일 뿐이다.
사실상 PDU는 2계층(Frame), 3계층(Packet), 4계층(Segment)을 생각하는 것이 옳다. 심화적으로 알기위해서는 왜 각각의 계층에 PDU가 다른지 알아야하고, 역할에 대해 자세히 알아야한다.

레벨 | 계층 | 기능
-----|------|-------
7계층 Application | 응용계층 / 프로토콜: DHCP, DNS, FTP, HTTP/ 서비스제공 | 사용자가 네트워크에 접근할 수 있도록 해주는 계층이다. 사용자가 인터페이스, 전자우편, 데이터베이스 관리 등 __서비스__ 제공한다. 예로 텔넷이나 HTTP, SSH, SMTP, FTP 등을 들 수 있다.
6계층 Presentation | 표현계층 / 프로토콜: JPEG, MPEG, SMB, AFP / 이해할 수 있는 포맷변환 | 운영체계의 한 부분으로 입력 또는 출력되는 데이터를 하나의 표현형태로 변환한다. 필요한 번역을 수행하여 두 장치가 일관되게 전송데이터를 서로 이해할 수 있도록 한다. 제어코드나 문자 및 그래픽등의 확장자(jpg, gif, mpg)를 생각하면 쉽다.
5계층 Session | 세션계층 / 프로토콜: SSH, TLS / 응용간의 질서제어 | 통신 세션을 구성하는 계층으로, __포트__ 연결이라고도 할 수 있다. 통신장치 간의 상호작용을 설정하고 유지하며 동기화 한다. 사용자간의 포트연결(세션) 이 유효한지 확인하고 설정한다.
4계층 Transport | 전송계층 / 프로토콜: TCP, UDP, ARP/ 장비: 게이트웨이 | 전체 메시지를 발신지 대 목적지(종단 대 종단) 간 제어와 에러를 관리한| 전체 메시지를 발신지 대 목적지(종단 대 종단) 간 제어와 에러를 관리한다.  패킷들의 전송이 유효한지를 확인하고 실패한 패킷은 다시 보내는 등 신뢰성 있는 통신을 보장하며, 머리말에는 세그먼트(Segment)가 포함된다. 대표적인 프로토콜은 TCP이다.
3계층 Network | 네트워크 계층 /  프로토콜:  IP, ICMP, IGMP / 장비: 라우터 | 다중 네트워크 링크에서 패킷(Packet)을 발신지로부터 목적지로 전달할 책임을 갖는다. 2계층은 노드내 노드 전달을 감독하는 것이고, 3계층은 각 패킷이 시작 지점에서 최종 목적지까지 성공적이고 효과적으로 전달되도록 하며, 대표적으로 프로토콜을 IP이다.
2계층 Data link | 데이터링크 계층 / 프로토콜:MAC, PPP / 장비: 브릿지, 스위치 | 오류없이 한 장치에서 다른 장치로 프레임(Frame, 비트의 모음)을 전달하는 역할. 스위치 같은 장비의 경우 MAC주소를 이용하여 정확한 장치로 정보 전달. 3계층에서 정보를 받아 주소와 제어정보를 시작(헤더)와 끝(테일)에 추가
1계층 Physical | 물리계층 / 프로토콜: Ethernet.RS-232C / 장비: 허브, 리피터 | 물리적 매체를 통해 비트(Bit)흐름을 전송하기 위해 요구되는 기능들을 조정. 케이블, 연결 장치 등과같이 기본적인 물리적 연결기의 전기적 명세를 정하고 네트워크의 두 노드를 물리적으로 연결시켜 주는 신호방식을 다룸


## 각 계층별 대표적 프로토콜
계층 |  프로토콜 
-----|-----------
7 Application (응용계층) | HTTP, SMPT, SNMP, FTP, Telnet, SSH & Scp, NFS, RTSP
6 Presentation (표현 계층) | JPEG, MPEG, XDR, ASN.1, SMB, AFP
5 Session (세션계층) | TSL , SSH, ISO 8327 / CCITT X.255, RPc, NetBIOS, Apple Talk
4 Transport (전송계층) | TCP, UDP, RTP, SCTP, SPX, AppleTalk
3 Network (네트워크 계층) | IP, ICMP, IGMP, X.25, CLNP, ARP, RARP, BGP, OSPF, RIP, IPX, DDP
2 Data Link (데이터 링크 계층) | Ethernet, Token Ring, PPP, HDLC, Frame relay, ISDN, ATM,    , FDDI
1 Physical (물리계층) | 전선, 전파, 광섬유, 동축케이블, 도파관, PSTN, Repeater, DSU, CSU, Modem

## 1) 물리계층 (Physical Layer)
* 기능: 전기적, 기계적 특성을 이용하여 통신 케이블로 전기적 신호(에너지)를 전송한다.
* 비트(Bit), 1(On), 0(Off)의 인코딩 전압 및 케이블 사양 핀의 수 등을 정의한 계층이다.
* 단지 데이터 전달의 역할을 할 뿐이다. (알고리즘, 오류제어 기능이 없다)
* 예로 RS-232C, RS-442, V-35, 10Base-T, 10Base-2 등이 있다.
* 1계층의 장비로는 케이블, 리피터, 허브 가 있다.
* 네트워크 엔지니어로서 감쇠 등의 열 손실과 IEEE 규격, 10Base-T, 10Base-2 등을 반드시 구분 및 감쇠 등 열손실에 대해 알아야 한다. 

## 2) 데이터 링크 계층 (Data Link Layer)
* 기능: 물리적인 연결을 통하여 인접한 두 장치간의 신뢰성 있는 정보 전송을 담당한다.
* 프레임(Frame)은 2계층에서의 전송단위이며, 주소와 제어 정보를 가지고 있다.
* 정보의 오류와 흐름을 관리하여 안정된 정보를 전달한다.
* 예: IEEE802.2(LLC), IEEE802.3(CSMA/CD), IEEE802.5(Token Ring)
* 장치: 브릿지, 스위치

## 3) 네트워크 계층 (Network Layer)
* 기능: 중계 노드를 통하여 전송하는 경우 어떻게 중계할 것인가를 규정한다.
* 패킷은 3계층 전송단위이며, 패킷을 목적지까지 경로 설정을 한다.
* 데이터를 목적지까지 가장 안전하고 빠르게 전달하도록 한다. 이것을 __라우팅__ 이라고 한다.
* 예: IP(Addressing, Fragmentation, Routing)
* 장비: 라우터, L3 스위치

## 4) 전송 계층 (Transport Layer)
* 기능: 종단 간(End-to-End)에 신뢰성 있고 정확한 데이터 전송을 담당한다.
* 4계층에서 전송되는 단위는 세그먼트(Segment)이며, 종단 간의 에러복구와 흐름제어를 담당한다.
* 예: TCP(Transmission Control Protocol), UDP(User Datagram Protocol)
* 장비: 4계층 장비로 L4 스위치를 두는 경우가 있는데, 3계층에서 온 트래픽을 분석하여 서비스 종류를 구분해 주는 역할을 한다.

## 5) 세션 계층 (Session Layer)
* 기능: 통신장치 간 상호작용 및 동기화를 제공한다.
* 연결세션에서 데이터 교환과 에러 발생시의 복구를 관리한다. 즉, 논리적 연결을 담당한다.
* 포트(Port)를 생각할 수 있으나, 4계층과 5계층의 경계 사이의 모호한 위치이다.
* 예: NetBIOS, SSH, Appletalk
* NetBIOS: 세션 내 연결관리 및 에러감지와 복구를 수행한다.

## 6) 표현 계층 (Presentation Layer)
* 기능: 데이터 표현에 차이가 있는 응용처리에서의 제어구조를 제공한다.
* 데이터 표현의 차이: ASCII, JPEG, MPEG 등의 번역을 말한다.
* 전송하는 데이터의 인코딩, 디코딩, 암호화, 코드변환 등을 수행한다.
* 예: ASCII, JPEG, MPEG

## 7) 응용 계층 (Application Layer)
* 사용자와 가장 밀접한 계층으로, 인터페이스 역할을 한다.
* 기능: 응용 프로세스 간의 정보 교환
* 예: 전자메일, 인터넷, 동영상 플레이어 등의 어플리케이션

## 3계층와 4계층의 차이!
쉽게 생각하면 3계층은 내 집을 찾아가는 것입니다. 집 10채 중 어떤 것이 나의 집인지 같은 우편번호 같은 것이 IP입니다. 
그렇게 집을 찾아갔는데 내 방이 어디지? 이것이 4계층입니다.
4계층이 왜 필요하냐면 쉽게 생각해서, 친구네 집 컴퓨터에 원격 접속하여 A라는 게임을 하려고 할때, IP를 이용해 원격접속이 됐지만,
A라는 게임이 어디있는지를 찾아야하죠. 여기서 A라는 게임의 위치를 알려주는 것이 4계층의 역할입니다.

[출처: http://beansberries.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-OSI-7-%EA%B3%84%EC%B8%B5#recentTrackback]
