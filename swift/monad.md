# Monad (모나드)
모나드는 특정한 상태로 값을 포장하는 것에서 출발합니다.
스위프트에서는 이를 옵셔널이라는 형태로 구현했는데 값이 있을지 없을지 모르는 상태 속에 포장하는 것입니다. 스위프트의 옵셔널은 스위프트에서 모나드를 이해 하기 좋은 예 중 하나입니다. 
함수객체와 모나든느 특정 기능이 아닌 디자인 패턴 혹은 자료구조로 이해하는 것이 맞다.

모나드는 함수객체의 일종입니다. 함수 객체는 포장된 값에 함수를 적용할 수 있는데요, 그래서 모나드도 컨텍스트에 포장된 값을 처리하여 컨텍스트에 포장된 값을 다시 반환하는 함수를 적용할 수 있습니다.

* 함수객체: 맵을 적용할 수 있는 컨테이너 타입으로 Array, Dictionary, Set 등등 스위프트의 컬렉션 타입은 함수객체다.

* 플랫맵: 포장된 값을 받아서 값이 있으면 포장을 풀어서 값을 처리한 수 포장된 값을 반환하고, 값이 없으면 값이 없는 대로 다시 포장하여 반환합니다.

``` swift

let optionalArr: [Int?] = [1, 2, nil, 5]

let mappedArr: [Int?] = optionalArr.map { $0 }
let flatmappedArr: [Int] = optionalArr.flatMap { $0 }

print(mappedArr) // [Optional(1), Optional(2), nil, Optional(5)]
print(flatmappedArr) // [1, 2, 5]
```

위 코드에서 optionalArr은 Array라는 컨테이너의 내부에 Optional이라는 형태의 컨테이너들이 여러개 들이있는 형태입니다.
맵은 Arr컨테이너 내부의 값이 타입이나 형태가 어찌되었든 Array 내부에 값이 있으면 그 값을 그저 클로저의 코드에만 실행하고 결과를 다시 Array컨테이너에 담기만 합니다.

그러나 플랫맵은 알아서 내부 컨테이너 값까지 추출합니다. 
또한 플랫맵은 내부의 값을 1차원으로 펼처놓는 작업도 수행하기 때문에 삼중컨테이너에서도 값을 꺼내어 모두 동일한 위상으로 펼쳐놓는 모양새를 갖춥니다.

스위프트에서 옵셔널에 관련된 여러 컨테이너의 값을 연달아 처리할 때, 바인딩을 통해 체인형식으로 사용할수 있기에, 맵보다는 플랫맵이 더 유용하게 사용됩니다.
